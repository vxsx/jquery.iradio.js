(function(a){a.fn.iradio=function(b){var c=a.extend({duration:500,draggable:!0},b);if(!a.ui||!a.ui.draggable)c.draggable=!1;var d=a(this).hide(),e=d.map(function(b,c){return a('label[for="'+a(c).attr("id")+'"]').selector}).get().join(", ");a(d.selector+", "+e).wrapAll('<div class="iradio-wrap"></div>');var f=d.parent().append('<div class="knob"></div>'),g=a(".knob",f).append("<span>"+a('label[for="'+d.filter(":checked").attr("id")+'"]').text()+"</span>"),h=a("span",g),i=a("label",f),j=Math.max.apply(i,a(i).map(function(b,c){return a(c).width()}).get()),k=d.length;i.width(j),g.width(j);var l=f.width(),m=l/k;for(var n=0;n<i.length;n++)a(i[n]).data("step",n);var o=a('label[for="'+a(":checked",f).attr("id")+'"]');d.change(function(){var b=a('label[for="'+a(this).attr("id")+'"]'),d=b.text(),e=c.duration*Math.abs(o.data("step")-b.data("step"))/k;o=b,g.is(":animated")&&(g.stop(),h.stop()),g.animate({left:b.position().left},e,"linear"),h.animate({opacity:"0.2"},e/2,"linear",function(){a(this).text(d).animate({opacity:"1"},e/2,"linear")})}),c.draggable&&g.draggable({containment:"parent",axis:"x",drag:function(b,c){var d=parseInt((c.position.left+g.width()/2)/m),e=a(i).eq(d).text();h.text()!=e&&h.animate({opacity:"0.2"},25,"linear",function(){a(this).text(e).animate({opacity:"1"},25,"linear")})},stop:function(a,b){var c=parseInt((b.position.left+g.width()/2)/m);g.animate({left:c*m},200,"linear")}});return this}})(jQuery)